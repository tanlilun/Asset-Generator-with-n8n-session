<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Post Comparison</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        
        .s1-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            /* align-items: flex-start; */
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .s1-social-post {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            min-width: 400px;
            width: auto;
            max-width: 400px;
            height: 720px;
            margin-bottom: 20px;
        }

        .s1-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            /* margin-bottom: 8px; */
            font-size: 18px;
            margin: 10px auto;
            padding: 8px 16px;
            background-color: white;
            color: black;
            text-align: center;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            width: fit-content;
        }

        .s1-preview-button {
            display: block;
            margin: 10px auto 30px;
            padding: 8px 16px;
            background-color: #1877F2;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            width: fit-content;
        }

        .s1-preview-button:hover {
            background-color: #145dbf;
        }
        
        /* Common Post Styles */
        .s1-post-header {
            display: flex;
            align-items: center;
            padding: 12px;
        }
        
        .s1-profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 8px;
            object-fit: cover;
        }
        
        .s1-user-info {
            flex-grow: 1;
        }
        
        .s1-username {
            font-weight: 600;
            font-size: 15px;
            color: #050505;
        }
        
        .s1-post-time {
            font-size: 13px;
            color: #65676B;
        }
        
        .s1-post-content {
            padding: 8px 16px 0 16px;
            font-size: 16px;
            color: black;
            line-height: 1.4;
            position: relative;
            text-align: justify;
        }
        
        .s1-post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
        }
        
        .s1-post-actions {
            display: flex;
            padding: 8px 12px;
            font-size: 15px;
            font-weight: 600;
        }
        
        .s1-action {
            display: flex;
            align-items: center;
            margin-right: 16px;
        }
        
        .s1-action svg {
            margin-right: 6px;
        }
        
        .s1-likes-comments {
            padding: 10px 12px;
            font-size: 15px;
        }
        
        /* Facebook Specific */
        .fb-header {
            display: flex;
            align-items: center;
            padding: 16px 16px 0 16px;
        }
        .fb-profile-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
            background: #fff;
            border: 2px solid #fff;
        }
        .fb-profile-details {
            flex: 1;
        }
        .fb-profile-name {
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
        }
        .fb-profile-name .fa-check-circle {
            color: #1877f2;
            font-size: 15px;
            margin-left: 5px;
        }
        .fb-profile-meta {
            font-size: 13px;
            color: #3a3b3c;
            margin-top: 2px;
            display: flex;
            align-items: center;
        }
        .fb-profile-meta .fa-globe-asia {
            margin-left: 4px;
            font-size: 12px;
        }
        .fb-post-content {
            padding: 8px 16px 0 16px;
            font-size: 16px;
            color: black;
            line-height: 1.4;
            position: relative;
            text-align: justify;
        }
        .fb-post-image-box {
            margin: 16px 0 0 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #e6f0fa;
            border-radius: 0 0 12px 12px;
            min-height: 300px;
            overflow: hidden;
        }
        .fb-post-image-box img {
            width: 100%;
            max-width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        .fb-post-actions {
            display: flex;
            align-items: center;
            padding: 0 16px 0 16px;
            margin-top: 10px;
            border-bottom: 1px solid transparent;
            padding-bottom: 6px;
        }
        .fb-post-actions .fb-reactions {
            display: flex;
            align-items: center;
            font-size: 15px;
            color: #3a3b3c;
        }
        .fb-post-actions .fb-reactions .fa-thumbs-up {
            background: #1877f2;
            color: #fff;
            border-radius: 50%;
            padding: 2px 3px;
            font-size: 13px;
            margin-right: 4px;
            border: 1px solid #fff;
        }
        .fb-post-actions .fb-comments-shares {
            margin-left: auto;
            font-size: 15px;
            color: #3a3b3c;
        }
        .fb-post-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .fb-post-buttons button {
            background: none;
            border: none;
            color: #3a3b3c;
            font-size: 15px;
            padding: 8px 0;
            border-radius: 6px;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
            cursor: pointer;
        }
        .fb-post-buttons button:hover {
            background: #b0b3b8;
        }
        .fb-post-buttons button i {
            margin-right: 8px;
            font-size: 20px;
        }
        
        /* Instagram Specific */
        .insta-header {
            display: flex;
            align-items: center;
            padding: 14px 16px 14px 14px;
        }
        .insta-actions {
            display: flex;
            align-items: center;
            padding: 16px 18px 0 18px;
        }
        .insta-actions i {
            color: #3a3b3c;
            font-size: 20px;
            margin-right: 22px;
            cursor: pointer;
        }
        .insta-actions .spacer {
            flex: 1;
        }
        .insta-actions .fa-bookmark {
            margin-right: 0;
        }
        .insta-actions .like-count {
            color: #3a3b3c;
            font-weight: 500;
            margin-left: -16px;
            margin-right: 22px;
            font-size: 16px;
            letter-spacing: 0.5px;
        }
        .insta-caption {
            color: black;
            font-family: 'Roboto', Arial, sans-serif;
            font-size: 16px;
            padding: 6px 18px 0 18px;
            line-height: 1.4;
            text-align: justify;
        }
        .insta-caption .ig-profile-name {
            font-weight: 700;
            color: #3a3b3c;
            margin-right: 4px;
            font-family: 'Roboto', Arial, sans-serif;
        }
        .insta-date {
            color: #bdbdbd;
            font-size: 14px;
            font-family: 'Roboto', Arial, sans-serif;
            padding: 6px 18px 18px 18px;
        }
        
        /* LinkedIn Specific */
        .post-header {
            display: flex;
            align-items: center;
            padding: 16px 16px 0 16px;
        }
        .profile-pic {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            background: #F28C4B;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            flex-shrink: 0;
        }
        .profile-pic svg {
            width: 32px;
            height: 32px;
            display: block;
        }
        .profile-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .lin-profile-name {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 2px;
            color: black;
            line-height: 1.2;
        }
        .profile-followers {
            font-size: 12px;
            color: #3a3b3c;
            margin-bottom: 2px;
        }
        .profile-meta {
            font-size: 12px;
            color: #3a3b3c;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .profile-meta i {
            font-size: 0.85em;
            margin-left: 2px;
        }
        .post-options {
            color: #3a3b3c;
            font-size: 16px;
            margin-left: 8px;
            margin-top: 2px;
            cursor: pointer;
        }
        .post-content {
            padding: 12px 16px 0 16px;
            font-size: 1.18rem;
            color: #fff;
            line-height: 1.5;
            letter-spacing: 0.01em;
            position: relative;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            max-height: 4.8em;
            transition: max-height 0.3s;
        }
        .post-content.expanded {
            -webkit-line-clamp: unset;
            max-height: 1000px;
            overflow: visible;
        }
        .more-link {
        color: #3b8eea;
        font-weight: 500;
        cursor: pointer;
        background: none;
        border: none;
        font-family: inherit;
        font-size: 20px;
        padding: 0;
        margin-left: 4px;
        position: absolute;
        right: 0;
        bottom: 0;
        background: linear-gradient(to right, rgba(35,38,40,0), #232628 80%);
        }
        .post-image-section {
        width: 100%;
        height: 260px;
        background: #e5dbce;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        margin-top: 18px;
        overflow: hidden;
        }
        .post-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        }
        .post-footer {
        padding: 0 16px;
        display: flex;
        align-items: center;
        height: 48px;
        font-size: 20px;
        color: #b0b3b8;
        justify-content: space-between;
        }
        .post-footer .reactions {
        display: flex;
        align-items: center;
        gap: -18px;
        font-size: 16px;
        }
        .post-footer .reactions .fa-thumbs-up {
        background-color: #378fe9;
        color: white;
        border-radius: 50%;
        padding: 2px 3px;
        font-size: 13px;
        margin-right: -8px;
        border: 1px solid #fff;
        }
        .post-footer .reactions .fa-heart {
        background-color: #f65e6b;
        color: white;
        border-radius: 50%;
        padding: 2px 3px;
        font-size: 13px;
        margin-right: -8px;
        border: 1px solid #fff;
        }
        .post-footer .reactions .fa-hands-clapping {
        background-color: #4bb543;
        color: white;
        border-radius: 50%;
        padding: 2px 3px;
        font-size: 13px;
        border: 1px solid #fff;
        }
        .post-footer .right-info {
        display: flex;
        align-items: center;
        gap: 12px;
        color: #3a3b3c;
        font-size: 16px;
        }
        .post-footer .right-info span {
        color: #3a3b3c;
        }
        .post-footer .right-info .dot {
        margin: 0 6px;
        font-size: 16px;
        color: #3a3b3c;
        line-height: 1;
        }
        .post-actions-bar {
        border-top: 1px solid #b0b3b880;
        display: flex;
        justify-content: space-around;
        align-items: center;
        height: 56px;
        padding: 0 0 2px 0;
        }
        .post-action {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #3a3b3c;
        font-size: 16px;
        cursor: pointer;
        flex: 1;
        justify-content: center;
        height: 100%;
        transition: color 0.2s;
        border-radius: 6px;
        }
        .post-action i {
        font-size: 20px;
        margin-bottom: 2px;
        }
        .post-action:hover {
        background-color: #b0b3b8;
        }

        video {
            width: 100%;
            height: auto;
            max-height: 36vh; /* limit height for 9:16 video */
        }
        @media (max-width: 400px) {
            .s1-social-post {
                background-color: #fff;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                min-width: 260px;
                width: auto;
                max-width: 400px;
                height: 720px;
                margin-bottom: 20px;
            }
        }
        
        /* Responsive Adjustments */
        @media (max-width: 900px) {
            .s1-container {
                flex-direction: column;
                align-items: center;
            }
            .s1-social-post {
                min-width: 320px;
                width: auto;
                max-width: 400px;
            }
        }
        .s1-email-full {
            flex: 1 1 100%;
            max-width: 400px;
        }

        /* When it wraps to the next row and has enough screen space */
        @media (min-width: 1280px) {
            .s1-container {
                align-items: flex-start;
            }
            .s1-email-full {
                max-width: 1250px;
            }
        }

        .message {
            text-align: center;
            font-size: 18px;
            margin-bottom: 30px;
        }

        .message::after {
            content: '';
            display: inline-block;
            animation: dots 3s steps(4, end) infinite;
            width: 1em;
            text-align: left;
        }

        @keyframes dots {
            0%   { content: ''; }
            25%  { content: '.'; }
            50%  { content: '..'; }
            75%  { content: '...'; }
            100% { content: ''; }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="s1-container">
        <!-- Facebook Post -->
        <div>
            <h3 class="s1-header">
                <svg width="20" height="20" fill="#1877F2" viewBox="0 0 24 24">
                    <path d="M22.675 0h-21.35C.595 0 0 .593 0 1.325v21.351C0 23.406.595 24 1.325 
                    24H12.82v-9.294H9.692V11.01h3.128V8.412c0-3.1 1.894-4.788 
                    4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 
                    0-1.796.715-1.796 1.763v2.312h3.587l-.467 3.696h-3.12V24h6.116C23.406 
                    24 24 23.406 24 22.675V1.325C24 .593 23.406 0 22.675 0z"/>
                </svg>
                Facebook Post
            </h3>
            <div class="s1-social-post">
                <div class="fb-header">
                    <img alt="Profile" class="fb-profile-img" height="40" src="./logo/UnionBank-logo.png" width="40"/>
                    <div class="fb-profile-details">
                        <div class="fb-profile-name">
                            UnionBank
                            <i class="fas fa-check-circle">
                            </i>
                        </div>
                        <div class="fb-profile-meta">
                            Just Now ·
                            <i class="fas fa-globe-asia">
                            </i>
                        </div>
                    </div>
                    <div class="post-options">
                            <i class="fas fa-ellipsis-h">
                            </i>
                        </div>
                </div>

                <div id="fb-caption-loading-section" class="">
                    <div class="message">Loading Caption<span></span></div>
                </div>
                <div id="fb-caption-section" class="fb-post-content hidden">
                    
                </div>

                <div id="fb-image-loading-section" class="">
                    <div class="message">Loading Image<span></span></div>
                </div>
                <div id="fb-image-section" class="fb-post-image-box hidden">
                </div>
                
                <div class="fb-post-actions">
                    <div class="fb-reactions">
                    <i class="fas fa-thumbs-up">
                    </i>
                    20
                    </div>
                    <div class="fb-comments-shares">
                    16 comments   1 share
                    </div>
                </div>
                <div class="fb-post-buttons">
                    <button>
                    <i class="far fa-thumbs-up">
                    </i>
                    Like
                    </button>
                    <button>
                    <i class="far fa-comment">
                    </i>
                    Comment
                    </button>
                    <button>
                    <i class="far fa-paper-plane">
                    </i>
                    Send
                    </button>
                    <button>
                    <i class="fas fa-share">
                    </i>
                    Share
                    </button>
                </div>
            </div>
            <!-- <div id="fb-preview-loading-section" class="">
                <div class="loader-wrapper">
                    <div class="loader"></div>
                </div>
                <div class="message">Uploading Post... Please Wait!</div>
            </div>
            <div id="fb-preview-button" class="hidden"></div> -->
        </div>
        <!-- LinkedIn Post -->
        <div>
            <h3 class="s1-header">
                <svg width="20" height="20" fill="#0077B5" viewBox="0 0 24 24">
                    <path d="M20.447 20.452H17.4v-5.569c0-1.328-.025-3.042-1.852-3.042-1.853 
                    0-2.136 1.445-2.136 2.939v5.672h-3.049V9h2.929v1.561h.041c.408-.775 
                    1.403-1.59 2.89-1.59 3.088 0 3.659 2.034 3.659 4.678v6.803zM5.337 
                    7.433a1.77 1.77 0 1 1 0-3.54 1.77 1.77 0 0 1 0 
                    3.54zm1.524 13.019H3.813V9h3.048v11.452zM22.225 
                    0H1.771C.792 0 0 .774 0 1.723v20.549C0 23.226.792 24 
                    1.771 24h20.451C23.2 24 24 23.226 24 22.272V1.723C24 
                    .774 23.2 0 22.222 0z"/>
                </svg>
                LinkedIn Post
            </h3>
            <div class="s1-social-post">
                <div class="post-header">
                    <img alt="Profile" class="fb-profile-img" height="48" src="./logo/UnionBank-logo.png" width="48"/>
                    <div class="profile-info">
                    <span class="lin-profile-name">
                    UnionBank
                    </span>
                    <span class="profile-followers">
                    25,814 followers
                    </span>
                    <span class="profile-meta">
                    Just Now
                    <i class="fas fa-globe-americas">
                    </i>
                    </span>
                    </div>
                    <div class="post-options">
                    <i class="fas fa-ellipsis-h">
                    </i>
                    </div>
                </div>

                <div id="linkedIn-caption-loading-section">
                    <div class="message">Loading Caption<span></span></div>
                </div>
                <div id="linkedIn-caption-section" class="s1-post-content hidden">
                </div>
                
                <div id="linkedIn-image-loading-section">
                    <div class="message">Loading Image<span></span></div>
                </div>
                <div id="linkedIn-image-section" class="post-image-section hidden">
                </div>

                <div class="post-footer">
                    <div class="reactions">
                    <i class="fas fa-thumbs-up">
                    </i>
                    <i class="fas fa-heart">
                    </i>
                    <i class="fas fa-hands-clapping">
                    </i>
                    <span style="color:#fff; font-weight:500; margin-left:2px;">
                    1,829
                    </span>
                    </div>
                    <div class="right-info">
                    <span>
                    197 comments
                    </span>
                    <span class="dot">
                    •
                    </span>
                    <span>
                    105 reposts
                    </span>
                    </div>
                </div>
                <div class="post-actions-bar">
                    <div class="post-action">
                    <i class="far fa-thumbs-up">
                    </i>
                    <span>
                    Like
                    </span>
                    </div>
                    <div class="post-action">
                    <i class="far fa-comment-dots">
                    </i>
                    <span>
                    Comment
                    </span>
                    </div>
                    <div class="post-action">
                    <i class="fas fa-retweet">
                    </i>
                    <span>
                    Repost
                    </span>
                    </div>
                    <div class="post-action">
                    <i class="fas fa-paper-plane">
                    </i>
                    <span>
                    Send
                    </span>
                    </div>
                </div>
            </div>
            <!-- <div id="linkedIn-preview-loading-section" class="">
                <div class="loader-wrapper">
                    <div class="loader"></div>
                </div>
                <div class="message">Uploading Post... Please Wait!</div>
            </div>
            <div id="linkedIn-preview-button" class="hidden"></div> -->
        </div>
        <!-- Instagram Post -->
        <div>
            <h3 class="s1-header">
                <i class="fab fa-instagram" style="color: #E1306C;"></i>
                Instagram Post
            </h3>
            <div class="s1-social-post">
                <div class="insta-header">
                    <img alt="Profile" class="fb-profile-img" height="40" src="./logo/UnionBank-logo.png" width="40"/>
                    <div class="fb-profile-details">
                        <div class="fb-profile-name">
                            UnionBank
                            <i class="fas fa-check-circle">
                            </i>
                        </div>
                    </div>
                    <div class="post-options">
                        <i class="fas fa-ellipsis-h">
                        </i>
                    </div>
                </div>

                <div id="ig-video-loading-section" class="">
                    <div class="message">Loading Short Video<span></span></div>
                </div>
                <div id="ig-video-section" class="hidden">
                </div>
                
                <div class="insta-actions">
                    <i class="far fa-heart">
                    </i>
                    <span class="like-count">
                        14
                    </span>
                    <i class="far fa-comment">
                    </i>
                    <i class="far fa-paper-plane">
                    </i>
                    <div class="spacer">
                    </div>
                    <i class="far fa-bookmark">
                    </i>
                </div>
                <div id="ig-profile-name-section" class="insta-caption">
                    <span class="ig-profile-name">
                        UnionBank
                    </span>
                </div>
                <div id="ig-caption-loading-section" class="">
                    <div class="message">Loading Caption<span></span></div>
                </div>
                <div class="insta-caption hidden" id="ig-caption-section">
                    
                </div>
                <div class="insta-date hidden" id="ig-date-section">
                    Just Now
                </div>
            </div>
            <!-- <div id="ig-preview-loading-section" class="">
                <div class="loader-wrapper">
                    <div class="loader"></div>
                </div>
                <div class="message">Uploading Post... Please Wait!</div>
            </div>
            <div id="ig-preview-button" class="hidden"></div> -->
        </div>
    </div>

    <script type="module">
        const fbCaptionSection = document.getElementById('fb-caption-section');
        const igCaptionSection = document.getElementById('ig-caption-section');
        const igProfileNameSection = document.getElementById('ig-profile-name-section');
        const igDateSection = document.getElementById('ig-date-section');
        const linkedInCaptionSection = document.getElementById('linkedIn-caption-section');
        // const fbPreviewSection = document.getElementById('fb-preview-button');
        // const igPreviewSection = document.getElementById('ig-preview-button');
        // const linkedInPreviewSection = document.getElementById('linkedIn-preview-button');

        const fbCaptionLoadingSection = document.getElementById('fb-caption-loading-section');
        const igCaptionLoadingSection = document.getElementById('ig-caption-loading-section');
        const linkedInCaptionLoadingSection = document.getElementById('linkedIn-caption-loading-section');
        // const fbPreviewLoadingSection = document.getElementById('fb-preview-loading-section');
        // const igPreviewLoadingSection = document.getElementById('ig-preview-loading-section');
        // const linkedInPreviewLoadingSection = document.getElementById('linkedIn-preview-loading-section');

        const fbImageSection = document.getElementById('fb-image-section');
        const igVideoSection = document.getElementById('ig-video-section');
        const linkedInImageSection = document.getElementById('linkedIn-image-section');
        const fbImageLoadingSection = document.getElementById('fb-image-loading-section');
        const igVideoLoadingSection = document.getElementById('ig-video-loading-section');
        const linkedInImageLoadingSection = document.getElementById('linkedIn-image-loading-section');

        const loaded = {
            captions: false,
            images: false,
            videos: false
            // previewFb: false,
            // previewIg: false,
            // previewLinkedIn: false
        };

        async function pollStatus() {
            let needsRetry = false;

            const requests = [];

            if (!loaded.captions) requests.push(fetch('/api/captions'));
            // if (!loaded.previewFb) requests.push(fetch('/api/preview-fb'));
            // if (!loaded.previewIg) requests.push(fetch('/api/preview-ig'));
            // if (!loaded.previewLinkedIn) requests.push(fetch('/api/preview-linkedIn'));
            if (!loaded.images) requests.push(fetch('/api/images'));
            if (!loaded.videos) requests.push(fetch('/api/videos'));
            
            const responses = await Promise.all(requests);
            const data = await Promise.all(responses.map(res => res.json()));

            let i = 0;

            if (!loaded.captions) {
                const data1 = data[i++];
                if (data1.length > 0) {
                    const caption = data1[0];
                    fbCaptionSection.innerHTML = `
                        <p>${caption.facebook}</p>
                    `;
                    igCaptionSection.innerHTML = `
                        <span class="ig-profile-name">
                            UnionBank
                        </span>
                        <span>
                            ${caption.instagram}
                        </span>
                    `;
                    linkedInCaptionSection.innerHTML = `
                        <p>${caption.linkedin}</p>
                    `;
                    fbCaptionSection.classList.remove('hidden');
                    igCaptionSection.classList.remove('hidden');
                    linkedInCaptionSection.classList.remove('hidden');
                    fbCaptionLoadingSection.classList.add('hidden');
                    igCaptionLoadingSection.classList.add('hidden');
                    linkedInCaptionLoadingSection.classList.add('hidden');

                    igDateSection.classList.remove('hidden');
                    igProfileNameSection.classList.add('hidden');

                    loaded.captions = true;
                } else {
                needsRetry = true;
                }
            }

            // if (!loaded.previewFb) {
            //     const data2 = data[i++];
            //     if (data2.length > 0) {
            //         const previewFb = data2[0];
            //         fbPreviewSection.innerHTML = `
            //             <a href="${previewFb.facebook_url}" target="_blank" class="s1-preview-button">Preview on Facebook</a>
            //         `;
            //         fbPreviewSection.classList.remove('hidden');
            //         fbPreviewLoadingSection.classList.add('hidden');
            //         loaded.previewFb = true;
            //     } else {
            //     needsRetry = true;
            //     }
            // }

            // if (!loaded.previewIg) {
            //     const data3 = data[i++];
            //     if (data3.length > 0) {
            //         const previewLink = data3[0];
            //         igPreviewSection.innerHTML = `
            //             <a href="${previewLink.instagram_url}" target="_blank" class="s1-preview-button">Preview on Instagram</a>
            //         `;
            //         igPreviewSection.classList.remove('hidden');
            //         igPreviewLoadingSection.classList.add('hidden');
            //         loaded.previewIg = true;
            //     } else {
            //     needsRetry = true;
            //     }
            // }

            // if (!loaded.previewLinkedIn) {
            //     const data4 = data[i++];
            //     if (data4.length > 0) {
            //         const previewLink = data4[0];
            //         linkedInPreviewSection.innerHTML = `
            //             <a href="${previewLink.linkedin_url}" target="_blank" class="s1-preview-button">Preview on LinkedIn</a>
            //         `;
            //         linkedInPreviewSection.classList.remove('hidden');
            //         linkedInPreviewLoadingSection.classList.add('hidden');
            //         loaded.previewLinkedIn = true;
            //     } else {
            //     needsRetry = true;
            //     }
            // }

            if (!loaded.images) {
                const data5 = data[i++];
                if (data5.length > 0) {
                    const image = data5[0];
                    fbImageSection.innerHTML = `
                        <img src="${image.image_url}" alt="Post image" class="s1-post-image">
                    `;
                    linkedInImageSection.innerHTML = `
                        <img src="${image.image_url}" alt="Post image" class="s1-post-image">
                    `;
                    fbImageSection.classList.remove('hidden');
                    linkedInImageSection.classList.remove('hidden');
                    fbImageLoadingSection.classList.add('hidden');
                    linkedInImageLoadingSection.classList.add('hidden');
                    loaded.images = true;
                } else {
                needsRetry = true;
                }
            }

            if (!loaded.videos) {
                const data6 = data[i++];
                if (data6.length > 0) {
                    const video = data6[0];
                    igVideoSection.innerHTML = `
                        <video autoplay loop muted playsinline width="100%" height="100%">
                        <source src="${video.video_url}" type="video/mp4">
                        Your browser does not support the video tag.
                        </video>
                    `;
                    igVideoSection.classList.remove('hidden');
                    igVideoLoadingSection.classList.add('hidden');
                    loaded.videos = true;
                } else {
                needsRetry = true;
                }
            }

            if (needsRetry) {
                setTimeout(pollStatus, 2000);
            }
        }

        pollStatus();
    </script>
</body>
</html>